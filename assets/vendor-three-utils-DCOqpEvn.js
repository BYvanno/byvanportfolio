import{a as e,t}from"./rolldown-runtime-Cn8xt2Gj.js";import{n,r}from"./vendor-framer-CxHWvC3I.js";import{a as i,i as a,n as o,o as s,r as c,t as l}from"./vendor-react-BVfj3gMx.js";import{A as u,C as d,D as f,E as p,O as m,S as h,T as g,_,a as v,b as y,c as b,d as x,f as S,g as C,h as ee,i as w,j as T,k as E,l as D,m as O,n as k,o as A,p as j,r as te,s as M,t as N,u as ne,v as re,w as ie,x as ae,y as oe}from"./vendor-three-core-CFjuDEbq.js";var se=t((e=>{var t=r();function n(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var i=typeof Object.is==`function`?Object.is:n,a=t.useState,o=t.useEffect,s=t.useLayoutEffect,c=t.useDebugValue;function l(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return s(function(){i.value=n,i.getSnapshot=t,u(i)&&l({inst:i})},[e,n,t]),o(function(){return u(i)&&l({inst:i}),e(function(){u(i)&&l({inst:i})})},[e]),c(n),n}function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch{return!0}}function d(e,t){return t()}var f=typeof window>`u`||window.document===void 0||window.document.createElement===void 0?d:l;e.useSyncExternalStore=t.useSyncExternalStore===void 0?f:t.useSyncExternalStore})),ce=t(((e,t)=>{t.exports=se()})),le=t((e=>{var t=r(),n=ce();function i(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var a=typeof Object.is==`function`?Object.is:i,o=n.useSyncExternalStore,s=t.useRef,c=t.useEffect,l=t.useMemo,u=t.useDebugValue;e.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(d.current===null){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=l(function(){function e(e){if(!o){if(o=!0,s=e,e=r(e),i!==void 0&&f.hasValue){var t=f.value;if(i(t,e))return c=t}return c=e}if(t=c,a(s,e))return t;var n=r(e);return i!==void 0&&i(t,n)?(s=e,t):(s=e,c=n)}var o=!1,s,c,l=n===void 0?null:n;return[function(){return e(t())},l===null?void 0:function(){return e(l())}]},[t,n,r,i]);var p=o(e,d[0],d[1]);return c(function(){f.hasValue=!0,f.value=p},[p]),u(p),p}})),ue=t(((e,t)=>{t.exports=le()})),de=e=>{let t,n=new Set,r=(e,r)=>{let i=typeof e==`function`?e(t):e;if(!Object.is(i,t)){let e=t;t=r??(typeof i!=`object`||!i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},fe=(e=>e?de(e):de),P=e(r(),1),{useSyncExternalStoreWithSelector:pe}=e(ue(),1).default,me=e=>e;function he(e,t=me,n){let r=pe(e.subscribe,e.getState,e.getInitialState,t,n);return P.useDebugValue(r),r}var ge=(e,t)=>{let n=fe(e),r=(e,r=t)=>he(n,e,r);return Object.assign(r,n),r},_e=((e,t)=>e?ge(e,t):ge),ve=t((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=typeof setTimeout==`function`?setTimeout:null,_=typeof clearTimeout==`function`?clearTimeout:null,v=typeof setImmediate<`u`?setImmediate:null;function y(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function b(e){if(h=!1,y(e),!m)if(n(c)!==null)m=!0,k();else{var t=n(l);t!==null&&A(b,t.startTime-e)}}var x=!1,S=-1,C=5,ee=-1;function w(){return!(e.unstable_now()-ee<C)}function T(){if(x){var t=e.unstable_now();ee=t;var i=!0;try{a:{m=!1,h&&(h=!1,_(S),S=-1),p=!0;var a=f;try{b:{for(y(t),d=n(c);d!==null&&!(d.expirationTime>t&&w());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,y(t),i=!0;break b}d===n(c)&&r(c),y(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&A(b,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?E():x=!1}}}var E;if(typeof v==`function`)E=function(){v(T)};else if(typeof MessageChannel<`u`){var D=new MessageChannel,O=D.port2;D.port1.onmessage=T,E=function(){O.postMessage(null)}}else E=function(){g(T,0)};function k(){x||(x=!0,E())}function A(t,n){S=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,k())},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(_(S),S=-1):h=!0,A(b,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,k())),r},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),ye=t(((e,t)=>{t.exports=ve()}));(()=>typeof window<`u`&&(window.document?.createElement||window.navigator?.product===`ReactNative`))()?P.useLayoutEffect:P.useEffect;function be(e,t,n){if(!e)return;if(n(e)===!0)return e;let r=t?e.return:e.child;for(;r;){let e=be(r,t,n);if(e)return e;r=t?null:r.sibling}}function xe(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}var Se=xe(P.createContext(null)),Ce=class extends P.Component{render(){return P.createElement(Se.Provider,{value:this._reactInternals},this.props.children)}};function we(){let e=P.useContext(Se);if(e===null)throw Error(`its-fine: useFiber must be called within a <FiberProvider />!`);let t=P.useId();return P.useMemo(()=>{for(let n of[e,e?.alternate]){if(!n)continue;let e=be(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}var Te=Symbol.for(`react.context`),Ee=e=>typeof e==`object`&&!!e&&`$$typeof`in e&&e.$$typeof===Te;function De(){let e=we(),[t]=P.useState(()=>new Map);t.clear();let n=e;for(;n;){let e=n.type;Ee(e)&&e!==Se&&!t.has(e)&&t.set(e,P.use(xe(e))),n=n.return}return t}function Oe(){let e=De();return P.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>P.createElement(t,null,P.createElement(n.Provider,{...r,value:e.get(n)})),e=>P.createElement(Ce,{...e})),[e])}var ke=s(),Ae=e(o()),je=ye(),F=n();function Me(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}P.act;var Ne=e=>e&&e.isOrthographicCamera,Pe=e=>e&&e.hasOwnProperty(`current`),Fe=e=>e!=null&&(typeof e==`string`||typeof e==`number`||e.isColor),I=((e,t)=>typeof window<`u`&&((e=window.document)?.createElement||(t=window.navigator)?.product===`ReactNative`))()?P.useLayoutEffect:P.useEffect;function Ie(e){let t=P.useRef(e);return I(()=>void(t.current=e),[e]),t}function Le(){let e=we(),t=Oe();return P.useMemo(()=>({children:n})=>(0,F.jsx)(be(e,!0,e=>e.type===P.StrictMode)?P.StrictMode:P.Fragment,{children:(0,F.jsx)(t,{children:n})}),[e,t])}function Re({set:e}){return I(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}var ze=(e=>(e=class extends P.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},e.getDerivedStateFromError=()=>({error:!0}),e))();function Be(e){let t=typeof window<`u`?window.devicePixelRatio??2:1;return Array.isArray(e)?Math.min(Math.max(e[0],t),e[1]):e}function L(e){return e.__r3f?.root.getState()}var R={obj:e=>e===Object(e)&&!R.arr(e)&&typeof e!=`function`,fun:e=>typeof e==`function`,str:e=>typeof e==`string`,num:e=>typeof e==`number`,boo:e=>typeof e==`boolean`,und:e=>e===void 0,nul:e=>e===null,arr:e=>Array.isArray(e),equ(e,t,{arrays:n=`shallow`,objects:r=`reference`,strict:i=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(R.str(e)||R.num(e)||R.boo(e))return e===t;let a=R.obj(e);if(a&&r===`reference`)return e===t;let o=R.arr(e);if(o&&n===`reference`)return e===t;if((o||a)&&e===t)return!0;let s;for(s in e)if(!(s in t))return!1;if(a&&n===`shallow`&&r===`shallow`){for(s in i?t:e)if(!R.equ(e[s],t[s],{strict:i,objects:`reference`}))return!1}else for(s in i?t:e)if(e[s]!==t[s])return!1;if(R.und(s)){if(o&&e.length===0&&t.length===0||a&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function Ve(e){let t={nodes:{},materials:{},meshes:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}function He(e){for(let t in e.type!==`Scene`&&(e.dispose==null||e.dispose()),e){let n=e[t];n?.type!==`Scene`&&(n==null||n.dispose==null||n.dispose())}}var Ue=[`children`,`key`,`ref`];function We(e){let t={};for(let n in e)Ue.includes(n)||(t[n]=e[n]);return t}function Ge(e,t,n,r){let i=e,a=i?.__r3f;return a||(a={root:t,type:n,parent:null,children:[],props:We(r),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=a)),a}function z(e,t){if(!t.includes(`-`)||t in e)return{root:e,key:t,target:e[t]};let n=e,r=t.split(`-`);for(let i of r){if(typeof n!=`object`||!n){if(n!==void 0){let e=r.slice(r.indexOf(i)).join(`-`);return{root:n,key:e,target:void 0}}return{root:e,key:t,target:void 0}}t=i,e=n,n=n[t]}return{root:e,key:t,target:n}}var Ke=/-\d+$/;function qe(e,t){if(R.str(t.props.attach)){if(Ke.test(t.props.attach)){let n=t.props.attach.replace(Ke,``),{root:r,key:i}=z(e.object,n);Array.isArray(r[i])||(r[i]=[])}let{root:n,key:r}=z(e.object,t.props.attach);t.previousAttach=n[r],n[r]=t.object}else R.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function Je(e,t){if(R.str(t.props.attach)){let{root:n,key:r}=z(e.object,t.props.attach),i=t.previousAttach;i===void 0?delete n[r]:n[r]=i}else t.previousAttach==null||t.previousAttach(e.object,t.object);delete t.previousAttach}var Ye=[...Ue,`args`,`dispose`,`attach`,`object`,`onUpdate`,`dispose`],Xe=new Map;function Ze(e){let t=Xe.get(e.constructor);try{t||(t=new e.constructor,Xe.set(e.constructor,t))}catch{}return t}function Qe(e,t){let n={};for(let r in t)if(!Ye.includes(r)&&!R.equ(t[r],e.props[r]))for(let e in n[r]=t[r],t)e.startsWith(`${r}-`)&&(n[e]=t[e]);for(let r in e.props){if(Ye.includes(r)||t.hasOwnProperty(r))continue;let{root:i,key:a}=z(e.object,r);if(i.constructor&&i.constructor.length===0){let e=Ze(i);R.und(e)||(n[a]=e[a])}else n[a]=0}return n}var $e=[`map`,`emissiveMap`,`sheenColorMap`,`specularColorMap`,`envMap`],et=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function B(e,t){var n;let r=e.__r3f,i=r&&Me(r).getState(),a=r?.eventCount;for(let n in t){let a=t[n];if(Ye.includes(n))continue;if(r&&et.test(n)){typeof a==`function`?r.handlers[n]=a:delete r.handlers[n],r.eventCount=Object.keys(r.handlers).length;continue}if(a===void 0)continue;let{root:s,key:c,target:l}=z(e,n);if(l===void 0&&(typeof s!=`object`||!s))throw Error(`R3F: Cannot set "${n}". Ensure it is an object before setting "${c}".`);if(l instanceof ne&&a instanceof ne)l.mask=a.mask;else if(l instanceof M&&Fe(a))l.set(a);else if(typeof l==`object`&&l&&typeof l.set==`function`&&typeof l.copy==`function`&&a!=null&&a.constructor&&l.constructor===a.constructor)l.copy(a);else if(typeof l==`object`&&l&&typeof l.set==`function`&&Array.isArray(a))typeof l.fromArray==`function`?l.fromArray(a):l.set(...a);else if(typeof l==`object`&&l&&typeof l.set==`function`&&typeof a==`number`)typeof l.setScalar==`function`?l.setScalar(a):l.set(a);else{var o;s[c]=a,i&&!i.linear&&$e.includes(c)&&(o=s[c])!=null&&o.isTexture&&s[c].format===1023&&s[c].type===1009&&(s[c].colorSpace=ie)}}if(r!=null&&r.parent&&i!=null&&i.internal&&(n=r.object)!=null&&n.isObject3D&&a!==r.eventCount){let e=r.object,t=i.internal.interaction.indexOf(e);t>-1&&i.internal.interaction.splice(t,1),r.eventCount&&e.raycast!==null&&i.internal.interaction.push(e)}return r&&r.props.attach===void 0&&(r.object.isBufferGeometry?r.props.attach=`geometry`:r.object.isMaterial&&(r.props.attach=`material`)),r&&V(r),e}function V(e){var t;if(!e.parent)return;e.props.onUpdate==null||e.props.onUpdate(e.object);let n=(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function tt(e,t){e.manual||(Ne(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix())}var H=e=>e?.isObject3D;function nt(e){return(e.eventObject||e.object).uuid+`/`+e.index+e.instanceId}function rt(e,t,n,r){let i=n.get(t);i&&(n.delete(t),n.size===0&&(e.delete(r),i.target.releasePointerCapture(r)))}function it(e,t){let{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,r)=>{(e.eventObject===t||e.object===t)&&n.hovered.delete(r)}),n.capturedMap.forEach((e,r)=>{rt(n.capturedMap,t,e,r)})}function at(e){function t(t){let{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}function n(e){return e.filter(e=>[`Move`,`Over`,`Enter`,`Out`,`Leave`].some(t=>e.__r3f?.handlers[`onPointer`+t]))}function r(t,n){let r=e.getState(),i=new Set,a=[],o=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<o.length;e++){let t=L(o[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||r.events.compute==null||r.events.compute(t,r);function s(e){let n=L(e);return!n||!n.events.enabled||n.raycaster.camera===null?[]:(n.raycaster.camera===void 0&&(n.events.compute==null||n.events.compute(t,n,n.previousRoot?.getState()),n.raycaster.camera===void 0&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[])}let c=o.flatMap(s).sort((e,t)=>{let n=L(e.object),r=L(t.object);return!n||!r?e.distance-t.distance:r.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{let t=nt(e);return i.has(t)?!1:(i.add(t),!0)});r.events.filter&&(c=r.events.filter(c,r));for(let e of c){let t=e.object;for(;t;){var l;(l=t.__r3f)!=null&&l.eventCount&&a.push({...e,eventObject:t}),t=t.parent}}if(`pointerId`in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(nt(e.intersection))||a.push(e.intersection);return a}function i(e,t,n,r){if(e.length){let i={stopped:!1};for(let o of e){let s=L(o.object);if(s||o.object.traverseAncestors(e=>{let t=L(e);if(t)return s=t,!1}),s){let{raycaster:c,pointer:l,camera:u,internal:d}=s,f=new T(l.x,l.y,0).unproject(u),p=e=>d.capturedMap.get(e)?.has(o.eventObject)??!1,m=e=>{let n={intersection:o,target:t.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(o.eventObject,n):d.capturedMap.set(e,new Map([[o.eventObject,n]])),t.target.setPointerCapture(e)},h=e=>{let t=d.capturedMap.get(e);t&&rt(d.capturedMap,o.eventObject,t,e)},g={};for(let e in t){let n=t[e];typeof n!=`function`&&(g[e]=n)}let _={...o,...g,pointer:l,intersections:e,stopped:i.stopped,delta:n,unprojectedPoint:f,ray:c.ray,camera:u,stopPropagation(){let n=`pointerId`in t&&d.capturedMap.get(t.pointerId);(!n||n.has(o.eventObject))&&(_.stopped=i.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find(e=>e.eventObject===o.eventObject)&&a([...e.slice(0,e.indexOf(o)),o]))},target:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:h},currentTarget:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:h},nativeEvent:t};if(r(_),i.stopped===!0)break}}}return e}function a(t){let{internal:n}=e.getState();for(let e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){let r=e.eventObject.__r3f;if(n.hovered.delete(nt(e)),r!=null&&r.eventCount){let n=r.handlers,i={...e,intersections:t};n.onPointerOut==null||n.onPointerOut(i),n.onPointerLeave==null||n.onPointerLeave(i)}}}function o(e,t){for(let n=0;n<t.length;n++){let r=t[n].__r3f;r==null||r.handlers.onPointerMissed==null||r.handlers.onPointerMissed(e)}}function s(s){switch(s){case`onPointerLeave`:case`onPointerCancel`:return()=>a([]);case`onLostPointerCapture`:return t=>{let{internal:n}=e.getState();`pointerId`in t&&n.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{n.capturedMap.has(t.pointerId)&&(n.capturedMap.delete(t.pointerId),a([]))})}}return function(c){let{onPointerMissed:l,internal:u}=e.getState();u.lastEvent.current=c;let d=s===`onPointerMove`,f=s===`onClick`||s===`onContextMenu`||s===`onDoubleClick`,p=r(c,d?n:void 0),m=f?t(c):0;s===`onPointerDown`&&(u.initialClick=[c.offsetX,c.offsetY],u.initialHits=p.map(e=>e.eventObject)),f&&!p.length&&m<=2&&(o(c,u.interaction),l&&l(c)),d&&a(p);function h(e){let t=e.eventObject,n=t.__r3f;if(!(n!=null&&n.eventCount))return;let r=n.handlers;if(d){if(r.onPointerOver||r.onPointerEnter||r.onPointerOut||r.onPointerLeave){let t=nt(e),n=u.hovered.get(t);n?n.stopped&&e.stopPropagation():(u.hovered.set(t,e),r.onPointerOver==null||r.onPointerOver(e),r.onPointerEnter==null||r.onPointerEnter(e))}r.onPointerMove==null||r.onPointerMove(e)}else{let n=r[s];n?(!f||u.initialHits.includes(t))&&(o(c,u.interaction.filter(e=>!u.initialHits.includes(e))),n(e)):f&&u.initialHits.includes(t)&&o(c,u.interaction.filter(e=>!u.initialHits.includes(e)))}}i(p,c,m,h)}}return{handlePointer:s}}var ot=e=>!!(e!=null&&e.render),st=P.createContext(null),ct=(e,t)=>{let n=_e((n,r)=>{let i=new T,a=new T,o=new T;function s(e=r().camera,t=a,n=r().size){let{width:s,height:c,top:l,left:u}=n,d=s/c;t.isVector3?o.copy(t):o.set(...t);let f=e.getWorldPosition(i).distanceTo(o);if(Ne(e))return{width:s/e.zoom,height:c/e.zoom,top:l,left:u,factor:1,distance:f,aspect:d};{let t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*f,r=n*(s/c);return{width:r,height:n,top:l,left:u,factor:s/r,distance:f,aspect:d}}}let c,l=e=>n(t=>({performance:{...t.performance,current:e}})),d=new u;return{set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(t=1)=>e(r(),t),advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new A,pointer:d,mouse:d,frameloop:`always`,onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let e=r();c&&clearTimeout(c),e.performance.current!==e.performance.min&&l(e.performance.min),c=setTimeout(()=>l(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:s},setEvents:e=>n(t=>({...t,events:{...t.events,...e}})),setSize:(e,t,i=0,o=0)=>{let c=r().camera,l={width:e,height:t,top:i,left:o};n(e=>({size:l,viewport:{...e.viewport,...s(c,a,l)}}))},setDpr:e=>n(t=>{let n=Be(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}}),setFrameloop:(e=`always`)=>{let t=r().clock;t.stop(),t.elapsedTime=0,e!==`never`&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:P.createRef(),active:!1,frames:0,priority:0,subscribe:(e,t,n)=>{let i=r().internal;return i.priority+=t>0?1:0,i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{let n=r().internal;n!=null&&n.subscribers&&(n.priority-=t>0?1:0,n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}}}),r=n.getState(),i=r.size,a=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{let{camera:e,size:t,viewport:r,gl:s,set:c}=n.getState();if(t.width!==i.width||t.height!==i.height||r.dpr!==a){i=t,a=r.dpr,tt(e,t),r.dpr>0&&s.setPixelRatio(r.dpr);let n=typeof HTMLCanvasElement<`u`&&s.domElement instanceof HTMLCanvasElement;s.setSize(t.width,t.height,n)}e!==o&&(o=e,c(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),n.subscribe(t=>e(t)),n};function lt(){let e=P.useContext(st);if(!e)throw Error(`R3F: Hooks can only be used within the Canvas component!`);return e}function ut(e=e=>e,t){return lt()(e,t)}function dt(e,t=0){let n=lt(),r=n.getState().internal.subscribe,i=Ie(e);return I(()=>r(i,t,n),[t,r,n]),null}var ft=new WeakMap,pt=e=>typeof e==`function`&&e?.prototype?.constructor===e;function mt(e,t){return function(n,...r){let i;return pt(n)?(i=ft.get(n),i||(i=new n,ft.set(n,i))):i=n,e&&e(i),Promise.all(r.map(e=>new Promise((n,r)=>i.load(e,e=>{H(e?.scene)&&Object.assign(e,Ve(e.scene)),n(e)},t,t=>r(Error(`Could not load ${e}: ${t?.message}`))))))}}function U(e,t,n,r){let a=Array.isArray(t)?t:[t],o=i(mt(n,r),[e,...a],{equal:R.equ});return Array.isArray(t)?o:o[0]}U.preload=function(e,t,n){let r=Array.isArray(t)?t:[t];return a(mt(n),[e,...r])},U.clear=function(e,t){return c([e,...Array.isArray(t)?t:[t]])};var ht={name:`@react-three/fiber`,version:`9.4.2`,description:`A React renderer for Threejs`,keywords:[`react`,`renderer`,`fiber`,`three`,`threejs`],author:`Paul Henschel (https://github.com/drcmda)`,license:`MIT`,maintainers:[`Josh Ellis (https://github.com/joshuaellis)`,`Cody Bennett (https://github.com/codyjasonbennett)`,`Kris Baumgarter (https://github.com/krispya)`],bugs:{url:`https://github.com/pmndrs/react-three-fiber/issues`},homepage:`https://github.com/pmndrs/react-three-fiber#readme`,repository:{type:`git`,url:`git+https://github.com/pmndrs/react-three-fiber.git`},collective:{type:`opencollective`,url:`https://opencollective.com/react-three-fiber`},main:`dist/react-three-fiber.cjs.js`,module:`dist/react-three-fiber.esm.js`,types:`dist/react-three-fiber.cjs.d.ts`,"react-native":`native/dist/react-three-fiber-native.cjs.js`,sideEffects:!1,preconstruct:{entrypoints:[`index.tsx`,`native.tsx`]},scripts:{prebuild:`cp ../../readme.md readme.md`},dependencies:{"@babel/runtime":`^7.17.8`,"@types/react-reconciler":`^0.32.0`,"@types/webxr":`*`,"base64-js":`^1.5.1`,buffer:`^6.0.3`,"its-fine":`^2.0.0`,"react-reconciler":`^0.31.0`,"react-use-measure":`^2.1.7`,scheduler:`^0.25.0`,"suspend-react":`^0.1.3`,"use-sync-external-store":`^1.4.0`,zustand:`^5.0.3`},peerDependencies:{expo:`>=43.0`,"expo-asset":`>=8.4`,"expo-file-system":`>=11.0`,"expo-gl":`>=11.0`,react:`^19.0.0`,"react-dom":`^19.0.0`,"react-native":`>=0.78`,three:`>=0.156`},peerDependenciesMeta:{"react-dom":{optional:!0},"react-native":{optional:!0},expo:{optional:!0},"expo-asset":{optional:!0},"expo-file-system":{optional:!0},"expo-gl":{optional:!0}}};function gt(e){let t=(0,Ae.default)(e);return t.injectIntoDevTools(),t}var _t=0,W={},vt=/^three(?=[A-Z])/,yt=e=>`${e[0].toUpperCase()}${e.slice(1)}`,bt=0,xt=e=>typeof e==`function`;function St(e){if(xt(e)){let t=`${bt++}`;return W[t]=e,t}else Object.assign(W,e)}function Ct(e,t){let n=yt(e),r=W[n];if(e!==`primitive`&&!r)throw Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(e===`primitive`&&!t.object)throw Error(`R3F: Primitives without 'object' are invalid!`);if(t.args!==void 0&&!Array.isArray(t.args))throw Error(`R3F: The args prop must be an array!`)}function wt(e,t,n){var r;return e=yt(e)in W?e:e.replace(vt,``),Ct(e,t),e===`primitive`&&(r=t.object)!=null&&r.__r3f&&delete t.object.__r3f,Ge(t.object,n,e,t)}function Tt(e){if(!e.isHidden){var t;e.props.attach&&(t=e.parent)!=null&&t.object?Je(e.parent,e):H(e.object)&&(e.object.visible=!1),e.isHidden=!0,V(e)}}function Et(e){if(e.isHidden){var t;e.props.attach&&(t=e.parent)!=null&&t.object?qe(e.parent,e):H(e.object)&&e.props.visible!==!1&&(e.object.visible=!0),e.isHidden=!1,V(e)}}function Dt(e,t,n){let r=t.root.getState();if(!(!e.parent&&e.object!==r.scene)){if(!t.object){let e=W[yt(t.type)];t.object=t.props.object??new e(...t.props.args??[]),t.object.__r3f=t}if(B(t.object,t.props),t.props.attach)qe(e,t);else if(H(t.object)&&H(e.object)){let r=e.object.children.indexOf(n?.object);if(n&&r!==-1){let n=e.object.children.indexOf(t.object);if(n!==-1){e.object.children.splice(n,1);let i=n<r?r-1:r;e.object.children.splice(i,0,t.object)}else t.object.parent=e.object,e.object.children.splice(r,0,t.object),t.object.dispatchEvent({type:`added`}),e.object.dispatchEvent({type:`childadded`,child:t.object})}else e.object.add(t.object)}for(let e of t.children)Dt(t,e);V(t)}}function Ot(e,t){t&&(t.parent=e,e.children.push(t),Dt(e,t))}function kt(e,t,n){if(!t||!n)return;t.parent=e;let r=e.children.indexOf(n);r===-1?e.children.push(t):e.children.splice(r,0,t),Dt(e,t,n)}function At(e){if(typeof e.dispose==`function`){let t=()=>{try{e.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<`u`?t():(0,je.unstable_scheduleCallback)(je.unstable_IdlePriority,t)}}function jt(e,t,n){if(!t)return;t.parent=null;let r=e.children.indexOf(t);r!==-1&&e.children.splice(r,1),t.props.attach?Je(e,t):H(t.object)&&H(e.object)&&(e.object.remove(t.object),it(Me(t),t.object));let i=t.props.dispose!==null&&n!==!1;for(let e=t.children.length-1;e>=0;e--){let n=t.children[e];jt(t,n,i)}t.children.length=0,delete t.object.__r3f,i&&t.type!==`primitive`&&t.object.type!==`Scene`&&At(t.object),n===void 0&&V(t)}function Mt(e,t){for(let n of[e,e.alternate])if(n!==null)if(typeof n.ref==`function`){n.refCleanup==null||n.refCleanup();let e=n.ref(t);typeof e==`function`&&(n.refCleanup=e)}else n.ref&&(n.ref.current=t)}var Nt=[];function Pt(){for(let[e]of Nt){let t=e.parent;if(t){e.props.attach?Je(t,e):H(e.object)&&H(t.object)&&t.object.remove(e.object);for(let t of e.children)t.props.attach?Je(e,t):H(t.object)&&H(e.object)&&e.object.remove(t.object)}e.isHidden&&Et(e),e.object.__r3f&&delete e.object.__r3f,e.type!==`primitive`&&At(e.object)}for(let[e,t,n]of Nt){e.props=t;let r=e.parent;if(r){let t=W[yt(e.type)];e.object=e.props.object??new t(...e.props.args??[]),e.object.__r3f=e,Mt(n,e.object),B(e.object,e.props),e.props.attach?qe(r,e):H(e.object)&&H(r.object)&&r.object.add(e.object);for(let t of e.children)t.props.attach?qe(e,t):H(t.object)&&H(e.object)&&e.object.add(t.object);V(e)}}Nt.length=0}var Ft=()=>{},It={},Lt=_t,Rt=0,zt=4,Bt=gt({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:wt,removeChild:jt,appendChild:Ot,appendInitialChild:Ot,insertBefore:kt,appendChildToContainer(e,t){let n=e.getState().scene.__r3f;!t||!n||Ot(n,t)},removeChildFromContainer(e,t){let n=e.getState().scene.__r3f;!t||!n||jt(n,t)},insertInContainerBefore(e,t,n){let r=e.getState().scene.__r3f;!t||!n||!r||kt(r,t,n)},getRootHostContext:()=>It,getChildHostContext:()=>It,commitUpdate(e,t,n,r,i){var a;Ct(t,r);let o=!1;if(e.type===`primitive`&&n.object!==r.object?o=!0:r.args?.length===n.args?.length?(a=r.args)!=null&&a.some((e,t)=>e!==n.args?.[t])&&(o=!0):o=!0,o)Nt.push([e,{...r},i]);else{let t=Qe(e,r);Object.keys(t).length&&(Object.assign(e.props,t),B(e.object,t))}(i.sibling===null||(i.flags&zt)===Rt)&&Pt()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>e?.object,prepareForCommit:()=>null,preparePortalMount:e=>Ge(e.getState().scene,e,``,{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Tt,unhideInstance:Et,createTextInstance:Ft,hideTextInstance:Ft,unhideTextInstance:Ft,scheduleTimeout:typeof setTimeout==`function`?setTimeout:void 0,cancelTimeout:typeof clearTimeout==`function`?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:P.createContext(null),setCurrentUpdatePriority(e){Lt=e},getCurrentUpdatePriority(){return Lt},resolveUpdatePriority(){if(Lt!==_t)return Lt;switch(typeof window<`u`&&window.event?.type){case`click`:case`contextmenu`:case`dblclick`:case`pointercancel`:case`pointerdown`:case`pointerup`:return ke.DiscreteEventPriority;case`pointermove`:case`pointerout`:case`pointerover`:case`pointerenter`:case`pointerleave`:case`wheel`:return ke.ContinuousEventPriority;default:return ke.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:`@react-three/fiber`,rendererVersion:ht.version}),G=new Map,K={objects:`shallow`,strict:!1};function Vt(e,t){if(!t&&typeof HTMLCanvasElement<`u`&&e instanceof HTMLCanvasElement&&e.parentElement){let{width:t,height:n,top:r,left:i}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:i}}else if(!t&&typeof OffscreenCanvas<`u`&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function Ht(e){let t=G.get(e),n=t?.fiber,r=t?.store;t&&console.warn(`R3F.createRoot should only be called once!`);let i=typeof reportError==`function`?reportError:console.error,a=r||ct(rn,an),o=n||Bt.createContainer(a,1,null,!1,null,``,i,i,i,null);t||G.set(e,{fiber:o,store:a});let s,c,l=!1,u=null;return{async configure(t={}){let n;u=new Promise(e=>n=e);let{gl:r,size:i,scene:o,events:f,onCreated:p,shadows:m=!1,linear:h=!1,flat:_=!1,legacy:v=!1,orthographic:y=!1,frameloop:S=`always`,dpr:C=[1,2],performance:w,raycaster:T,camera:E,onPointerMissed:D}=t,O=a.getState(),A=O.gl;if(!O.gl){let t={canvas:e,powerPreference:`high-performance`,antialias:!0,alpha:!0},n=typeof r==`function`?await r(t):r;A=ot(n)?n:new k({...t,...r}),O.set({gl:A})}let j=O.raycaster;j||O.set({raycaster:j=new d});let{params:te,...M}=T||{};if(R.equ(M,j,K)||B(j,{...M}),R.equ(te,j.params,K)||B(j,{params:{...j.params,...te}}),!O.camera||O.camera===c&&!R.equ(c,E,K)){c=E;let e=E?.isCamera,t=e?E:y?new ee(0,0,0,0,.1,1e3):new re(75,0,.1,1e3);e||(t.position.z=5,E&&(B(t,E),t.manual||(`aspect`in E||`left`in E||`right`in E||`bottom`in E||`top`in E)&&(t.manual=!0,t.updateProjectionMatrix())),!O.camera&&!(E!=null&&E.rotation)&&t.lookAt(0,0,0)),O.set({camera:t}),j.camera=t}if(!O.scene){let e;o!=null&&o.isScene?(e=o,Ge(e,a,``,{})):(e=new g,Ge(e,a,``,{}),o&&B(e,o)),O.set({scene:e})}f&&!O.events.handlers&&O.set({events:f(a)});let N=Vt(e,i);if(R.equ(N,O.size,K)||O.setSize(N.width,N.height,N.top,N.left),C&&O.viewport.dpr!==Be(C)&&O.setDpr(C),O.frameloop!==S&&O.setFrameloop(S),O.onPointerMissed||O.set({onPointerMissed:D}),w&&!R.equ(w,O.performance,K)&&O.set(e=>({performance:{...e.performance,...w}})),!O.xr){let e=(e,t)=>{let n=a.getState();n.frameloop!==`never`&&an(e,!0,n,t)},t=()=>{let t=a.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||rn(t)},n={connect(){let e=a.getState().gl;e.xr.addEventListener(`sessionstart`,t),e.xr.addEventListener(`sessionend`,t)},disconnect(){let e=a.getState().gl;e.xr.removeEventListener(`sessionstart`,t),e.xr.removeEventListener(`sessionend`,t)}};typeof A.xr?.addEventListener==`function`&&n.connect(),O.set({xr:n})}if(A.shadowMap){let e=A.shadowMap.enabled,t=A.shadowMap.type;if(A.shadowMap.enabled=!!m,R.boo(m))A.shadowMap.type=2;else if(R.str(m)){let e={basic:0,percentage:1,soft:2,variance:3};A.shadowMap.type=e[m]??2}else R.obj(m)&&Object.assign(A.shadowMap,m);(e!==A.shadowMap.enabled||t!==A.shadowMap.type)&&(A.shadowMap.needsUpdate=!0)}return b.enabled=!v,l||(A.outputColorSpace=h?x:ie,A.toneMapping=_?0:4),O.legacy!==v&&O.set(()=>({legacy:v})),O.linear!==h&&O.set(()=>({linear:h})),O.flat!==_&&O.set(()=>({flat:_})),r&&!R.fun(r)&&!ot(r)&&!R.equ(r,A,K)&&B(A,r),s=p,l=!0,n(),this},render(t){return!l&&!u&&this.configure(),u.then(()=>{Bt.updateContainer((0,F.jsx)(Ut,{store:a,children:t,onCreated:s,rootElement:e}),o,null,()=>void 0)}),a},unmount(){Wt(e)}}}function Ut({store:e,children:t,onCreated:n,rootElement:r}){return I(()=>{let t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),n&&n(t),e.getState().events.connected||t.events.connect==null||t.events.connect(r)},[]),(0,F.jsx)(st.Provider,{value:e,children:t})}function Wt(e,t){let n=G.get(e),r=n?.fiber;if(r){let i=n?.store.getState();i&&(i.internal.active=!1),Bt.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var n,r,a,o;i.events.disconnect==null||i.events.disconnect(),(n=i.gl)==null||(r=n.renderLists)==null||r.dispose==null||r.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(o=i.gl)!=null&&o.xr&&i.xr.disconnect(),He(i.scene),G.delete(e),t&&t(e)}catch{}},500)})}}var Gt=new Set,Kt=new Set,qt=new Set;function Jt(e,t){if(e.size)for(let{callback:n}of e.values())n(t)}function q(e,t){switch(e){case`before`:return Jt(Gt,t);case`after`:return Jt(Kt,t);case`tail`:return Jt(qt,t)}}var Yt,Xt;function Zt(e,t,n){let r=t.clock.getDelta();t.frameloop===`never`&&typeof e==`number`&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),Yt=t.internal.subscribers;for(let e=0;e<Yt.length;e++)Xt=Yt[e],Xt.ref.current(Xt.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop===`always`?1:t.internal.frames}var Qt=!1,$t=!1,en,tn,J;function nn(e){tn=requestAnimationFrame(nn),Qt=!0,en=0,q(`before`,e),$t=!0;for(let n of G.values()){var t;J=n.store.getState(),J.internal.active&&(J.frameloop===`always`||J.internal.frames>0)&&!((t=J.gl.xr)!=null&&t.isPresenting)&&(en+=Zt(e,J))}if($t=!1,q(`after`,e),en===0)return q(`tail`,e),Qt=!1,cancelAnimationFrame(tn)}function rn(e,t=1){var n;if(!e)return G.forEach(e=>rn(e.store.getState(),t));(n=e.gl.xr)!=null&&n.isPresenting||!e.internal.active||e.frameloop===`never`||(t>1?e.internal.frames=Math.min(60,e.internal.frames+t):$t?e.internal.frames=2:e.internal.frames=1,Qt||(Qt=!0,requestAnimationFrame(nn)))}function an(e,t=!0,n,r){if(t&&q(`before`,e),n)Zt(e,n,r);else for(let t of G.values())Zt(e,t.store.getState());t&&q(`after`,e)}var on={onClick:[`click`,!1],onContextMenu:[`contextmenu`,!1],onDoubleClick:[`dblclick`,!1],onWheel:[`wheel`,!0],onPointerDown:[`pointerdown`,!0],onPointerUp:[`pointerup`,!0],onPointerLeave:[`pointerleave`,!0],onPointerMove:[`pointermove`,!0],onPointerCancel:[`pointercancel`,!0],onLostPointerCapture:[`lostpointercapture`,!0]};function sn(e){let{handlePointer:t}=at(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-(e.offsetY/t.size.height)*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(on).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var t;let{events:n,internal:r}=e.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{let{set:n,events:r}=e.getState();if(r.disconnect==null||r.disconnect(),n(e=>({events:{...e.events,connected:t}})),r.handlers)for(let e in r.handlers){let n=r.handlers[e],[i,a]=on[e];t.addEventListener(i,n,{passive:a})}},disconnect:()=>{let{set:t,events:n}=e.getState();if(n.connected){if(n.handlers)for(let e in n.handlers){let t=n.handlers[e],[r]=on[e];n.connected.removeEventListener(r,t)}t(e=>({events:{...e.events,connected:void 0}}))}}}}s(),o(),ye();function cn({ref:e,children:t,fallback:n,resize:r,style:i,gl:a,events:o=sn,eventSource:s,eventPrefix:c,shadows:u,linear:d,flat:f,legacy:p,orthographic:m,frameloop:h,dpr:g,performance:_,raycaster:v,camera:y,scene:b,onPointerMissed:x,onCreated:S,...C}){P.useMemo(()=>St(te),[]);let ee=Le(),[w,T]=l({scroll:!0,debounce:{scroll:50,resize:0},...r}),E=P.useRef(null),D=P.useRef(null);P.useImperativeHandle(e,()=>E.current);let O=Ie(x),[k,A]=P.useState(!1),[j,M]=P.useState(!1);if(k)throw k;if(j)throw j;let N=P.useRef(null);return I(()=>{let e=E.current;if(T.width>0&&T.height>0&&e){N.current||=Ht(e);async function n(){await N.current.configure({gl:a,scene:b,events:o,shadows:u,linear:d,flat:f,legacy:p,orthographic:m,frameloop:h,dpr:g,performance:_,raycaster:v,camera:y,size:T,onPointerMissed:(...e)=>O.current==null?void 0:O.current(...e),onCreated:e=>{e.events.connect==null||e.events.connect(s?Pe(s)?s.current:s:D.current),c&&e.setEvents({compute:(e,t)=>{let n=e[c+`X`],r=e[c+`Y`];t.pointer.set(n/t.size.width*2-1,-(r/t.size.height)*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),S?.(e)}}),N.current.render((0,F.jsx)(ee,{children:(0,F.jsx)(ze,{set:M,children:(0,F.jsx)(P.Suspense,{fallback:(0,F.jsx)(Re,{set:A}),children:t??null})})}))}n()}}),P.useEffect(()=>{let e=E.current;if(e)return()=>Wt(e)},[]),(0,F.jsx)(`div`,{ref:D,style:{position:`relative`,width:`100%`,height:`100%`,overflow:`hidden`,pointerEvents:s?`none`:`auto`,...i},...C,children:(0,F.jsx)(`div`,{ref:w,style:{width:`100%`,height:`100%`},children:(0,F.jsx)(`canvas`,{ref:E,style:{display:`block`},children:n})})})}function ln(e){return(0,F.jsx)(Ce,{children:(0,F.jsx)(cn,{...e})})}function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(null,arguments)}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?un(Object(n),!0).forEach(function(t){X(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}new u,new u;function fn(e,t){if(!(e instanceof t))throw TypeError(`Cannot call a class as a function`)}var Z=function e(t,n,r){var i=this;fn(this,e),X(this,`dot2`,function(e,t){return i.x*e+i.y*t}),X(this,`dot3`,function(e,t,n){return i.x*e+i.y*t+i.z*n}),this.x=t,this.y=n,this.z=r},pn=[new Z(1,1,0),new Z(-1,1,0),new Z(1,-1,0),new Z(-1,-1,0),new Z(1,0,1),new Z(-1,0,1),new Z(1,0,-1),new Z(-1,0,-1),new Z(0,1,1),new Z(0,-1,1),new Z(0,1,-1),new Z(0,-1,-1)],mn=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],hn=Array(512),gn=Array(512);(function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var n=t&1?mn[t]^e&255:mn[t]^e>>8&255;hn[t]=hn[t+256]=n,gn[t]=gn[t+256]=pn[n%12]}})(0),.5*(Math.sqrt(3)-1),(3-Math.sqrt(3))/6,Math.PI*2;function _n(e){if(typeof e==`number`)e=Math.abs(e);else if(typeof e==`string`){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%2147483647}return e===0&&(e=311),e}function vn(e){var t=_n(e);return function(){var e=t*48271%2147483647;return t=e,e/2147483647}}var yn=new function e(t){var n=this;fn(this,e),X(this,`seed`,0),X(this,`init`,function(e){n.seed=e,n.value=vn(e)}),X(this,`value`,vn(this.seed)),this.init(t)}(Math.random()),bn={radius:1,center:[0,0,0]};function xn(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yn,r=dn(dn({},bn),t),i=r.radius,a=r.center,o=0;o<e.length;o+=3){var s=n.value()**(1/3),c=n.value()*2-1,l=n.value()*2-1,u=n.value()*2-1,d=Math.sqrt(c*c+l*l+u*u);c=s*c/d,l=s*l/d,u=s*u/d,e[o]=c*i+a[0],e[o+1]=l*i+a[1],e[o+2]=u*i+a[2]}return e}var Sn=e=>e===Object(e)&&!Array.isArray(e)&&typeof e!=`function`;function Cn(e,t){let n=ut(e=>e.gl),r=U(f,Sn(e)?Object.values(e):e);return(0,P.useLayoutEffect)(()=>{t?.(r)},[t]),(0,P.useEffect)(()=>{if(`initTexture`in n){let e=[];Array.isArray(r)?e=r:r instanceof p?e=[r]:Sn(r)&&(e=Object.values(r)),e.forEach(e=>{e instanceof p&&n.initTexture(e)})}},[n,r]),(0,P.useMemo)(()=>{if(Sn(e)){let t={},n=0;for(let i in e)t[i]=r[n++];return t}else return r},[e,r])}Cn.preload=e=>U.preload(f,e),Cn.clear=e=>U.clear(f,e);var wn=(()=>parseInt(`181`.replace(/\D+/g,``)))(),Tn=(e,t)=>{e.updateRanges[0]=t},En=wn>=154?`opaque_fragment`:`output_fragment`,Dn=class extends oe{constructor(e){super(e),this.onBeforeCompile=(e,t)=>{let{isWebGL2:n}=t.capabilities;e.fragmentShader=e.fragmentShader.replace(`#include <${En}>`,`
        ${n?`#include <${En}>`:`#extension GL_OES_standard_derivatives : enable\n#include <${En}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${wn>=154?`colorspace_fragment`:`encodings_fragment`}>
      `)}}},On=P.forwardRef((e,t)=>{let[n]=P.useState(()=>new Dn(null));return P.createElement(`primitive`,Y({},e,{object:n,ref:t,attach:`material`}))});function kn(e,t,n=new T){let r=Math.PI*(e-.5),i=2*Math.PI*(t-.5);return n.x=Math.cos(i),n.y=Math.sin(r),n.z=Math.sin(i),n}var An=P.forwardRef(({inclination:e=.6,azimuth:t=.1,distance:n=1e3,mieCoefficient:r=.005,mieDirectionalG:i=.8,rayleigh:a=.5,turbidity:o=10,sunPosition:s=kn(e,t),...c},l)=>{let u=P.useMemo(()=>new T().setScalar(n),[n]),[d]=P.useState(()=>new N);return P.createElement(`primitive`,Y({object:d,ref:l,"material-uniforms-mieCoefficient-value":r,"material-uniforms-mieDirectionalG-value":i,"material-uniforms-rayleigh-value":a,"material-uniforms-sunPosition-value":s,"material-uniforms-turbidity-value":o,scale:u},c))}),jn=`https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png`,Mn=new S,Nn=new T,Pn=new y,Fn=new T,In=new y,Q=new T,Ln=P.createContext(null),Rn=P.forwardRef(({children:e,material:t=j,texture:n=jn,range:r,limit:i=200,frustumCulled:a,...o},s)=>{St({CloudMaterial:P.useMemo(()=>class extends t{constructor(){super();let e=parseInt(`181`.replace(/\D+/g,``))>=154?`opaque_fragment`:`output_fragment`;this.onBeforeCompile=t=>{t.vertexShader=`attribute float cloudOpacity;
               varying float vOpacity;
              `+t.vertexShader.replace(`#include <fog_vertex>`,`#include <fog_vertex>
                 vOpacity = cloudOpacity;
                `),t.fragmentShader=`varying float vOpacity;
              `+t.fragmentShader.replace(`#include <${e}>`,`#include <${e}>
                 gl_FragColor = vec4(outgoingLight, diffuseColor.a * vOpacity);
                `)}}},[t])});let c=P.useRef(null),l=P.useRef([]),u=P.useMemo(()=>new Float32Array(Array.from({length:i},()=>1)),[i]),d=P.useMemo(()=>new Float32Array(Array.from({length:i},()=>[1,1,1]).flat()),[i]),f=Cn(n),p=0,m=0,h,g=new y,_=new T(0,0,1),v=new T;dt((e,t)=>{for(p=e.clock.elapsedTime,Mn.copy(c.current.matrixWorld).invert(),e.camera.matrixWorld.decompose(Fn,In,Q),m=0;m<l.current.length;m++)h=l.current[m],h.ref.current.matrixWorld.decompose(Nn,Pn,Q),Nn.add(v.copy(h.position).applyQuaternion(Pn).multiply(Q)),Pn.copy(In).multiply(g.setFromAxisAngle(_,h.rotation+=t*h.rotationFactor)),Q.multiplyScalar(h.volume+(1+Math.sin(p*h.density*h.speed))/2*h.growth),h.matrix.compose(Nn,Pn,Q).premultiply(Mn),h.dist=Nn.distanceTo(Fn);for(l.current.sort((e,t)=>t.dist-e.dist),m=0;m<l.current.length;m++)h=l.current[m],u[m]=h.opacity*(h.dist<h.fade-1?h.dist/h.fade:1),c.current.setMatrixAt(m,h.matrix),c.current.setColorAt(m,h.color);c.current.geometry.attributes.cloudOpacity.needsUpdate=!0,c.current.instanceMatrix.needsUpdate=!0,c.current.instanceColor&&(c.current.instanceColor.needsUpdate=!0)}),P.useLayoutEffect(()=>{let e=Math.min(i,r===void 0?i:r,l.current.length);c.current.count=e,Tn(c.current.instanceMatrix,{start:0,count:e*16}),c.current.instanceColor&&Tn(c.current.instanceColor,{start:0,count:e*3}),Tn(c.current.geometry.attributes.cloudOpacity,{start:0,count:e})});let b=[f.image.width??1,f.image.height??1],x=Math.max(b[0],b[1]);return b=[b[0]/x,b[1]/x],P.createElement(`group`,Y({ref:s},o),P.createElement(Ln.Provider,{value:l},e,P.createElement(`instancedMesh`,{matrixAutoUpdate:!1,ref:c,args:[null,null,i],frustumCulled:a},P.createElement(`instancedBufferAttribute`,{usage:D,attach:`instanceColor`,args:[d,3]}),P.createElement(`planeGeometry`,{args:[...b]},P.createElement(`instancedBufferAttribute`,{usage:D,attach:`attributes-cloudOpacity`,args:[u,1]})),P.createElement(`cloudMaterial`,{key:t.name,map:f,transparent:!0,depthWrite:!1}))))}),zn=P.forwardRef(({opacity:e=1,speed:t=0,bounds:n=[5,1,1],segments:r=20,color:i=`#ffffff`,fade:a=10,volume:o=6,smallestVolume:s=.25,distribute:c=null,growth:l=4,concentrate:u=`inside`,seed:d=Math.random(),...f},p)=>{function m(){let e=Math.sin(d++)*1e4;return e-Math.floor(e)}let h=P.useContext(Ln),g=P.useRef(null),_=P.useId(),v=P.useMemo(()=>[...Array(r)].map((e,t)=>({segments:r,bounds:new T(1,1,1),position:new T,uuid:_,index:t,ref:g,dist:0,matrix:new S,color:new M,rotation:t*(Math.PI/r)})),[r,_]);return P.useLayoutEffect(()=>{v.forEach((d,f)=>{B(d,{volume:o,color:i,speed:t,growth:l,opacity:e,fade:a,bounds:n,density:Math.max(.5,m()),rotationFactor:Math.max(.2,.5*m())*t});let p=c?.(d,f);(p||r>1)&&d.position.copy(d.bounds).multiply(p?.point??{x:m()*2-1,y:m()*2-1,z:m()*2-1});let h=Math.abs(d.position.x),g=Math.abs(d.position.y),_=Math.abs(d.position.z),v=Math.max(h,g,_);d.length=1,h===v&&(d.length-=h/d.bounds.x),g===v&&(d.length-=g/d.bounds.y),_===v&&(d.length-=_/d.bounds.z),d.volume=(p?.volume===void 0?Math.max(Math.max(0,s),u===`random`?m():u===`inside`?d.length:1-d.length):p.volume)*o})},[u,n,a,i,e,l,o,d,r,t]),P.useLayoutEffect(()=>{let e=v;return h.current=[...h.current,...e],()=>{h.current=h.current.filter(e=>e.uuid!==_)}},[v]),P.useImperativeHandle(p,()=>g.current,[]),P.createElement(`group`,Y({ref:g},f))}),Bn=P.forwardRef((e,t)=>P.useContext(Ln)?P.createElement(zn,Y({ref:t},e)):P.createElement(Rn,null,P.createElement(zn,Y({ref:t},e)))),$,Vn,Hn=P.createContext(null),Un=new S,Wn=new T,Gn=P.forwardRef(({children:e,range:t,limit:n=1e3,...r},i)=>{let a=P.useRef(null);P.useImperativeHandle(i,()=>a.current,[]);let[o,s]=P.useState([]),[[c,l,u]]=P.useState(()=>[new Float32Array(n*3),Float32Array.from({length:n*3},()=>1),Float32Array.from({length:n},()=>1)]);P.useEffect(()=>{a.current.geometry.attributes.position.needsUpdate=!0}),dt(()=>{for(a.current.updateMatrix(),a.current.updateMatrixWorld(),Un.copy(a.current.matrixWorld).invert(),a.current.geometry.drawRange.count=Math.min(n,t===void 0?n:t,o.length),$=0;$<o.length;$++)Vn=o[$].current,Vn.getWorldPosition(Wn).applyMatrix4(Un),Wn.toArray(c,$*3),a.current.geometry.attributes.position.needsUpdate=!0,Vn.matrixWorldNeedsUpdate=!0,Vn.color.toArray(l,$*3),a.current.geometry.attributes.color.needsUpdate=!0,u.set([Vn.size],$),a.current.geometry.attributes.size.needsUpdate=!0});let d=P.useMemo(()=>({getParent:()=>a,subscribe:e=>(s(t=>[...t,e]),()=>s(t=>t.filter(t=>t.current!==e.current)))}),[]);return P.createElement(`points`,Y({userData:{instances:o},matrixAutoUpdate:!1,ref:a,raycast:()=>null},r),P.createElement(`bufferGeometry`,null,P.createElement(`bufferAttribute`,{attach:`attributes-position`,args:[c,3],usage:D}),P.createElement(`bufferAttribute`,{attach:`attributes-color`,args:[l,3],usage:D}),P.createElement(`bufferAttribute`,{attach:`attributes-size`,args:[u,1],usage:D})),P.createElement(Hn.Provider,{value:d},e))}),Kn=P.forwardRef(({children:e,positions:t,colors:n,sizes:r,stride:i=3,...a},o)=>{let s=P.useRef(null);return P.useImperativeHandle(o,()=>s.current,[]),dt(()=>{let e=s.current.geometry.attributes;e.position.needsUpdate=!0,n&&(e.color.needsUpdate=!0),r&&(e.size.needsUpdate=!0)}),P.createElement(`points`,Y({ref:s},a),P.createElement(`bufferGeometry`,null,P.createElement(`bufferAttribute`,{attach:`attributes-position`,args:[t,i],usage:D}),n&&P.createElement(`bufferAttribute`,{attach:`attributes-color`,args:[n,i],count:n.length/i,usage:35048}),r&&P.createElement(`bufferAttribute`,{attach:`attributes-size`,args:[r,1],count:r.length/i,usage:35048})),e)}),qn=P.forwardRef((e,t)=>e.positions instanceof Float32Array?P.createElement(Kn,Y({},e,{ref:t})):P.createElement(Gn,Y({},e,{ref:t})));export{xn as a,On as i,Bn as n,ln as o,An as r,dt as s,qn as t};